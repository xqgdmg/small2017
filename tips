 关于CoordinatorLayout展开与折叠相关属性
标签： androidAndroid Design SuppoMaterial Design
2016-08-23 10:24 2847人阅读 评论(4) 收藏 举报
 分类： android（28）   CollapsingToolbarLayout（2）
版权声明：本文为博主原创文章，未经博主允许不得转载。

1、如何监听CollapsingToolbarLayout的展开与折叠

使用官方提供的 AppBarLayout.OnOffsetChangedListener就能实现了，不过要封装一下才好用。

自定义一个继承了 AppBarLayout.OnOffsetChangedListener的类，这里命名为AppBarStateChangeListener：
[html] view plain copy 在CODE上查看代码片派生到我的代码片
public abstract class AppBarStateChangeListener implements AppBarLayout.OnOffsetChangedListener {

    public enum State {
        EXPANDED,
        COLLAPSED,
        IDLE
    }

    private State mCurrentState = State.IDLE;

    @Override
    public final void onOffsetChanged(AppBarLayout appBarLayout, int i) {
        if (i == 0) {
            if (mCurrentState != State.EXPANDED) {
                onStateChanged(appBarLayout, State.EXPANDED);
            }
            mCurrentState = State.EXPANDED;
        } else if (Math.abs(i) >= appBarLayout.getTotalScrollRange()) {
            if (mCurrentState != State.COLLAPSED) {
                onStateChanged(appBarLayout, State.COLLAPSED);
            }
            mCurrentState = State.COLLAPSED;
        } else {
            if (mCurrentState != State.IDLE) {
                onStateChanged(appBarLayout, State.IDLE);
            }
            mCurrentState = State.IDLE;
        }
    }

    public abstract void onStateChanged(AppBarLayout appBarLayout, State state);
}

然后这样使用它：
[html] view plain copy 在CODE上查看代码片派生到我的代码片
mAppBarLayout.addOnOffsetChangedListener(new AppBarStateChangeListener() {
           @Override
           public void onStateChanged(AppBarLayout appBarLayout, State state) {
               Log.d("STATE", state.name());
               if( state == State.EXPANDED ) {

                   //展开状态

               }else if(state == State.COLLAPSED){

                   //折叠状态

               }else {

                   //中间状态

               }
           }
       });

2、常用属性

Android:fitsSystemWindows="true"
是一个boolean值的内部属性，让view可以根据系统窗口(如status bar)来调整自己的布局，如果值为true,就会调整view的paingding属性来给system windows留出空间...
用于实现状态栏，即 沉浸式状态栏！

Toolbar
android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
app:popupTheme="@style/ThemeOverlay.AppCompat.Light"
app:layout_scrollFlags="scroll|enterAlways" （CoordinatorLayout属性，子布局通过设置该属性确定是否可滑动）

说明：
app:popupTheme，这个属性就是用来自定义我们弹出的菜单的样式，在之前的Actionbar的溢出菜单，我们是不能自定义他的样式的，只能根据你的theme来选择黑白两种，不能自己定义，现在我们可以定义弹出菜单的样式。

CoordinatorLayout
app:layout_scrollFlags （子布局设置是否可滑动）
android:layout_gravity 属性控制组件在布局中的位置
app:layout_behavior="@string/appbar_scrolling_view_behavior" 通知布局中包含滑动组件！

子布局通过app:layout_scrollFlags确定是否可滑动.给需要滑动的组件设置 app:layout_scrollFlags="scroll|enterAlways" 属性。
设置的layout_scrollFlags有如下几种选项： scroll: 所有想滚动出屏幕的view都需要设置这个flag- 没有设置这个flag的view将被固定在屏幕顶部。
 enterAlways:
这个flag让任意向下的滚动都会导致该view变为可见，启用快速“返回模式”。 enterAlwaysCollapsed:
当你的视图已经设置minHeight属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。
 exitUntilCollapsed: 滚动退出屏幕，最后折叠在顶端。
CollapsingToolbarLayout
app:collapsedTitleGravity 指定折叠状态的标题如何放置，可选值:top、bottom等
app:collapsedTitleTextAppearance="@style/TextAppearance.CollapsedTitle"
指定折叠状态标题文字的样貌
app:expandedTitleTextAppearance="@style/TextAppearance.ExpandedTitle"
指定展开状态标题文字的样貌
app:contentScrim="?attr/colorPrimaryDark"
指定CollapsingToolbarLayout完全被滚出到屏幕外时的ColorDrawable
app:expandedTitleGravity  展开状态的标题如何放置
app:titleEnabled指定是否显示标题文本
app:toolbarId指定与之关联的ToolBar，如果未指定则默认使用第一个被发现的ToolBar子View
app:expandedTitleMarginStart="10dp"
app:expandedTitleMargin
app:expandedTitleMarginBottom
app:expandedTitleMarginEnd
展开状态改变标题文字的位置，通过margin设置
app:layout_collapseParallaxMultiplier="0.7"
设置视差的系数，介于0.0-1.0之间。
app:layout_collapseMode="pin"（子布局设置折叠模式）
有两种“pin”：固定模式，在折叠的时候最后固定在顶端；“parallax”：视差模式，在折叠的时候会有个视差折叠的效果。

CollapsingToolbarLayout主要是提供一个可折叠的Toolbar容器，对容器中的不同View设置layout_collapseMode折叠模式，来达到不同的折叠效果。

Floating Action Button (FAB)
 app:fabSize="normal" 是用来定义 FAB 的大小的，normal 的意思是在大多数情况下标准尺寸为 56dp 的按钮，但是万一你想使用较小的一个， mini 是另一个选择，它的大小将变成 40dp。



app:elevation 　　为空闲状态下的阴影深度，

app:pressedTranslationZ　　 为按下状态的。



app:backgroundTint 　　是指定默认的背景颜色
app:rippleColor 　　是指定点击时的背景颜色
app:border 　　 Width 　border的宽度
app:fabSize 　　是指FloatingActionButton的大小，可选normal|mini
app:pressedTranslationZ  　　按下去时的z轴的便宜



TabLayout
app:tabIndicatorColor  　　tab的指示符颜色
app:tabSelectedTextColor  　　选择tab的文本颜色
app:tabTextColor  　　普通tab字体颜色
app:tabMode  　　模式，可选fixed和scrollable fixed是指固定个数，scrollable是可以横行滚动app:tabGravity  对齐方式，可选fill和center